Common Data Objects

Definitions of data objects that are good candidates for wider usage:

[S] Use a Common Money Object

Use the following common money structure: 

    Money:
      type: object
      properties:
        amount:
          type: number
          format: decimal
          example: 99.95
        currency:
          type: string
          format: iso-4217
          example: EUR
      required:
        - amount
        - currency

Make sure that you don’t convert the “amount” field to `float` / `double` types when implementing
this interface in a specific language or when doing calculations. Otherwise, you might lose
precision. Instead, use exact formats like
Java’s [`BigDecimal`](https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html).
See [Stack Overflow](http://stackoverflow.com/a/3730040/342852) for more info.

Some JSON parsers (NodeJS’s, for example) convert numbers to floats by default. After discussing the
[pros and cons](https://docs.google.com/spreadsheets/d/12wTj-2w39f69XZGwRDrosNc1yWPwQpGgEs_DCt5ODaQ),
we’ve decided on "decimal" as our amount format. It is not a standard Swagger format, but should
help us to avoid parsing numbers as float / doubles. 

[S] Use Common Address Fields

Address structures play a role in different functional and use-case contexts, including country
variances. The address structure below should be sufficient for most of our business-related use
cases. Use it in our APIs, unless it does not fit to required functionality and need — preferable
compatible extension — changes:

    address:
        description:
          a common address structure adequate for many use cases
        type: object
        properties:
          salutation:
            type: string
            description: A salutation and/or title which may be used for personal contacts
            example: Mr
          first_name:
            type: string
            description: given name(s) or first name(s) of a person; may also include the middle names
            example: Hans Dieter
          last_name:
            type: string
            description: family name(s) or surname(s) of a person
            example: Mustermann
          business_name:
            type: string
            description: company name of the business organization
            example: Consulting Services GmbH
          street:
            type: string
            description: full street address including house number and street name
            example: Schönhauser Allee 103
          additional:
            type: string
            description: further details like suite, apt #, etc.
            example: 2. Hinterhof rechts
          city:
            type: string
            description: name of the city
            example: Berlin
          zip:
            type: string
            description: Zip code or postal code
            example: 14265
          country_code:
            type: string
            format: iso-3166-1-alpha-2
            example: DE
        required:
          - first_name
          - last_name
          - street
          - city
          - zip
          - country_code

[M] Use Common Error Return Objects

`application/x.problem+json` is an  example of a common error return object derived from an
[Internet draft specification](https://tools.ietf.org/html/draft-nottingham-http-problem-07) for
error objects that have never reached registered
[media type status](http://www.iana.org/assignments/media-types/media-types.xhtml#application).
The media type name is prefixed with “x.” to denote its status. 

APIs may define custom problems types with extension properties, according to their specific needs.
[Go here](https://docs.pennybags.zalan.do/problems) for a more detailed explanation
(IAM login required). 

    Problem:
     type: object
     properties:
       type:
         type: string
         format: uri
         description: |
           An absolute URI that identifies the problem type.  When dereferenced,
           it SHOULD provide human-readable documentation for the problem type
           (e.g., using HTML).
         example: http://httpstatus.es/503
       title:
         type: string
         description: |
           A short, summary of the problem type. Written in english and readable 
           for engineers (usually not suited for non technical stakeholders and 
           not localized); example: Service Unavailable
       status:
         type: integer
         format: int32
         description: |
           The HTTP status code generated by the origin server for this occurrence
           of the problem.
         example: 503
       detail:
         type: string
         description: |
           A human readable explanation specific to this occurrence of the
           problem.
         example: Connection to database timed out
       instance:
         type: string
         format: uri
         description: |
           An absolute URI that identifies the specific occurrence of the problem.
           It may or may not yield further information if dereferenced.
     required:
       - type
       - title
       - status


[M] An error message must not contain the stack trace.

The reasons:

* The API would leak implementation details to the outside world.
* Other teams would possibly rely on the stack trace and a refactoring would be hard.
* Brand partners and other third parties receiving the API, might receive leaked, sensitive
  information
